/*
INSTRUCTIONS:
If you hit a car you lose a life
If you hit a pedestrian you either gain a life if lives < 3 or you get an extra 10 seconds
Press up to go faster and down to go slower. 
Everytime the meters hit 0 you get another delivery so you want to go as fast as possible.
You get 2 euro for every delivery
Every day your money resets to 0 so you have to make enough every day to get by
To win you have to last 5 working days
Don't hit too many pedestrians!!! (hint hint 150)

TO DO:
comment code

TO TEST:
getting to the end of the game
losing all your lives
hitting 200 pedestrians in total
not hitting 200 pedestrians
not feeding your kids
feeding your kids
savings
good ending
score system
help screen
music
*/
#include <stm32f031x6.h>
#include <display.h>
#include <stdio.h>
#include <stdint.h>
#include <math.h>
#include <musical_notes.h>
#include <sound.h>
#include <serial.h>


// Declare Functions
uint32_t prbs(void);
uint32_t random(uint32_t lower,uint32_t upper);
void initClock(void);
void initSysTick(void);
void SysTick_Handler(void);
void delay(volatile uint32_t dly);
void setupIO();
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py);
void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber);
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode);
uint16_t titleScreen(uint16_t gameStart, uint16_t highScore);
void scoreScreen(uint16_t highscore);
void startScreen();
uint16_t endScreen(uint16_t day, uint16_t deliverys);
void playTune();
void reduceMilliseconds();
uint16_t fixTimer(uint16_t timer);

// Declare variables
volatile uint32_t milliseconds;

// Images
const uint16_t Background[]=
{
	16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,
};
const uint16_t heart0[]=
{
	17969,17969,17969,17969,65287,65287,65287,65287,17969,17969,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,65287,65287,17969,17969,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,65287,65287,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,
};
const uint16_t heart1[]=
{
	17969,17969,17969,17969,61443,61443,61443,61443,17969,17969,61443,61443,61443,61443,17969,17969,17969,17969,17969,17969,17969,17969,61443,61443,61443,61443,17969,17969,61443,61443,61443,61443,17969,17969,17969,17969,17969,17969,61443,61443,65287,65287,65287,65287,61443,61443,65287,65287,65287,65287,61443,61443,17969,17969,17969,17969,61443,61443,65287,65287,65287,65287,61443,61443,65287,65287,65287,65287,61443,61443,17969,17969,61443,61443,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,61443,61443,61443,61443,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,61443,61443,61443,61443,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,61443,61443,61443,61443,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,61443,61443,17969,17969,61443,61443,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,61443,61443,17969,17969,17969,17969,61443,61443,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,61443,61443,17969,17969,17969,17969,17969,17969,61443,61443,65287,65287,65287,65287,65287,65287,61443,61443,17969,17969,17969,17969,17969,17969,17969,17969,61443,61443,65287,65287,65287,65287,65287,65287,61443,61443,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,61443,61443,65287,65287,61443,61443,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,61443,61443,65287,65287,61443,61443,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,61443,61443,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,61443,61443,17969,17969,17969,17969,17969,17969,17969,17969,
};
const uint16_t livesImg[]=
{
	65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,65287,65287,16385,16385,16385,16385,16385,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,65287,65287,16385,16385,16385,16385,16385,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,16385,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,65287,65287,65287,65287,65287,65287,17969,17969,17969,17969,17969,65287,65287,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,65287,65287,65287,65287,16385,16385,16385,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,17969,65287,65287,65287,65287,65287,65287,17969,17969,17969,17969,17969,65287,65287,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,65287,65287,65287,65287,16385,16385,16385,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,65287,65287,16385,16385,16385,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,65287,65287,16385,16385,16385,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,17969,17969,17969,65287,65287,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,65287,65287,16385,16385,16385,65287,65287,17969,17969,17969,17969,17969,17969,65287,65287,17969,65287,65287,65287,65287,65287,65287,65287,65287,65287,65287,17969,17969,17969,65287,65287,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,65287,65287,16385,16385,16385,16385,16385,65287,65287,17969,17969,65287,65287,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,65287,65287,17969,17969,65287,65287,16385,16385,16385,16385,16385,16385,16385,16385,16385,65287,65287,16385,16385,16385,16385,16385,65287,65287,17969,17969,65287,65287,17969,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,17969,17969,65287,65287,17969,17969,65287,65287,65287,65287,65287,65287,65287,65287,16385,65287,65287,65287,65287,65287,65287,16385,16385,16385,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,65287,65287,65287,65287,65287,65287,17969,17969,17969,65287,65287,65287,65287,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,65287,65287,65287,65287,65287,65287,65287,65287,16385,65287,65287,65287,65287,65287,65287,16385,16385,16385,17969,17969,65287,65287,17969,17969,17969,17969,17969,17969,17969,65287,65287,65287,65287,65287,65287,17969,17969,17969,65287,65287,65287,65287,65287,65287,65287,65287,17969,17969,17969,17969,17969,17969,17969,17969,
};
const uint16_t car[]=
{
	17969,17969,17969,17969,4624,4624,4624,4624,17969,17969,17969,17969,17969,17969,4624,4624,7200,7200,7200,7200,4624,4624,17969,17969,17969,4624,16142,65315,7200,7200,7200,7200,65315,16142,4624,17969,0,4624,7200,7200,7200,7200,7200,7200,7200,7200,4624,0,0,4624,7200,42113,42113,42113,42113,42113,42113,7200,4624,0,0,4624,42113,26281,26281,26281,26281,26281,26281,42113,4624,0,0,4624,26281,26281,26281,26281,26281,26281,26281,26281,4624,0,17969,4624,26281,7200,7200,7200,7200,7200,7200,26281,4624,17969,17969,4624,4624,7200,7200,7200,7200,7200,7200,4624,4624,17969,17969,4624,4624,7200,7200,7200,7200,7200,7200,4624,4624,17969,17969,4624,4624,7200,7200,7200,7200,7200,7200,4624,4624,17969,17969,4624,4624,7200,7200,7200,7200,7200,7200,4624,4624,17969,17969,4624,7200,7200,7200,7200,7200,7200,7200,7200,4624,17969,0,4624,7200,7200,7200,7200,7200,7200,7200,7200,4624,0,0,4624,7200,42113,7200,7200,7200,7200,42113,7200,4624,0,0,4624,7200,4624,42113,42113,42113,42113,4624,7200,4624,0,0,4624,7200,7200,4624,4624,4624,4624,7200,7200,4624,0,17969,4624,4624,7200,7200,7200,7200,7200,7200,4624,4624,17969,17969,17969,17969,4624,7200,7200,7200,7200,4624,17969,17969,17969,17969,17969,17969,17969,4624,4624,4624,4624,17969,17969,17969,17969,
};
const uint16_t car0[]=
{
	17969,41779,33604,15567,15567,33604,33604,15567,15567,33604,41779,17969,17969,49706,41779,63405,63405,41779,41779,63405,63405,41779,49706,17969,17969,49706,33604,15567,15567,33604,33604,15567,15567,33604,49706,17969,17969,49706,33604,15567,15567,33604,33604,15567,15567,33604,49706,17969,0,49706,33604,41779,41779,41779,41779,41779,41779,33604,49706,0,0,49706,41779,41779,0,0,0,0,41779,41779,49706,0,0,49706,41779,63405,0,0,0,0,63405,41779,49706,0,0,49706,63405,63405,15567,15567,15567,15567,63405,63405,49706,0,17969,49706,63405,15567,15567,15567,15567,15567,15567,63405,49706,17969,17969,49706,63405,15567,15567,15567,15567,15567,15567,63405,49706,17969,17969,49706,63405,15567,15567,15567,15567,15567,15567,63405,49706,17969,17969,49706,0,15567,15567,15567,15567,15567,15567,0,49706,17969,17969,49706,0,0,0,0,0,0,0,0,49706,17969,0,49706,41779,0,0,0,0,0,0,41779,49706,0,0,49706,41779,63405,63405,33604,33604,63405,63405,41779,49706,0,0,49706,33604,15567,15567,33604,33604,15567,15567,33604,49706,0,0,49706,33604,15567,15567,33604,33604,15567,15567,33604,49706,0,17969,49706,33604,15567,15567,33604,33604,15567,15567,33604,49706,17969,17969,49706,49706,49706,15567,33604,33604,15567,49706,49706,49706,17969,17969,17969,17969,17969,49706,49706,49706,49706,17969,17969,17969,17969,
};
const uint16_t car1[]=
{
	17969,17969,6544,6544,6544,6544,6544,6544,6544,6544,17969,17969,17969,6544,24521,24521,24521,61307,61307,24521,24521,24521,6544,17969,17969,17969,40914,40914,40914,65535,65535,40914,40914,40914,17969,17969,17969,17969,17969,6544,24521,61307,61307,24521,6544,17969,17969,17969,0,0,6544,24521,24521,61307,61307,24521,24521,6544,0,0,0,6544,24521,24521,40914,65535,65535,40914,24521,24521,6544,0,0,6544,24521,40914,40914,65535,65535,40914,40914,24521,6544,0,0,6544,40914,40914,40914,65535,65535,40914,40914,40914,6544,0,17969,6544,24521,40914,40914,65535,65535,40914,40914,24521,6544,17969,17969,6544,24521,40914,40914,65535,65535,40914,40914,24521,6544,17969,17969,6544,24521,40914,40914,65535,65535,40914,40914,24521,6544,17969,17969,6544,0,40914,40914,65535,65535,40914,40914,0,6544,17969,17969,6544,0,0,0,0,0,0,0,0,6544,17969,0,6544,0,0,0,0,0,0,0,0,6544,0,0,6544,40914,0,0,0,0,0,0,40914,6544,0,0,6544,24521,40914,40914,65535,65535,40914,40914,24521,6544,0,0,6544,24521,24521,40914,65535,65535,40914,24521,24521,6544,0,17969,6544,61307,24521,24521,65535,65535,24521,24521,61307,6544,17969,17969,17969,6544,6544,24521,61307,61307,24521,6544,6544,17969,17969,17969,17969,17969,17969,6544,6544,6544,6544,17969,17969,17969,17969,
};
const uint16_t car2[]=
{
	17969,17969,54796,54796,54796,54796,54796,54796,54796,54796,17969,17969,17969,54796,16142,65535,65535,40766,40766,65535,65535,16142,54796,17969,17969,17969,40766,65535,65535,40766,40766,65535,65535,40766,17969,17969,17969,17969,17969,54796,65535,40766,40766,65535,54796,17969,17969,17969,0,0,54796,65535,65535,40766,40766,65535,65535,54796,0,0,0,54796,16142,65535,65535,40766,40766,65535,65535,16142,54796,0,0,54796,16142,65535,65535,40766,40766,65535,65535,16142,54796,0,0,54796,40766,65535,65535,40766,40766,65535,65535,40766,54796,0,17969,54796,16142,65535,65535,40766,40766,65535,65535,16142,54796,17969,17969,54796,16142,65535,65535,40766,40766,65535,65535,16142,54796,17969,17969,54796,16142,65535,65535,40766,40766,65535,65535,16142,54796,17969,17969,54796,0,65535,65535,40766,40766,65535,65535,0,54796,17969,17969,54796,0,0,0,0,0,0,0,0,54796,17969,0,54796,0,0,0,0,0,0,0,0,54796,0,0,54796,16142,0,0,0,0,0,0,16142,54796,0,0,54796,16142,65535,65535,40766,40766,65535,65535,16142,54796,0,0,54796,16142,65535,65535,40766,40766,65535,65535,16142,54796,0,17969,54796,61307,65535,65535,40766,40766,65535,65535,61307,54796,17969,17969,17969,54796,54796,65535,61307,61307,65535,54796,54796,17969,17969,17969,17969,17969,17969,54796,54796,54796,54796,17969,17969,17969,17969,
};
const uint16_t car3[]=
{
	17969,8331,32956,15567,15567,32956,32956,15567,15567,32956,8331,17969,17969,130,8331,63405,63405,8331,8331,63405,63405,8331,130,17969,17969,130,32956,15567,15567,32956,32956,15567,15567,32956,130,17969,17969,130,32956,15567,15567,32956,32956,15567,15567,32956,130,17969,0,130,32956,8331,8331,8331,8331,8331,8331,32956,130,0,0,130,8331,8331,0,0,0,0,8331,8331,130,0,0,130,8331,63405,0,0,0,0,63405,8331,130,0,0,130,63405,63405,15567,15567,15567,15567,63405,63405,130,0,17969,130,63405,15567,15567,15567,15567,15567,15567,63405,130,17969,17969,130,63405,15567,15567,15567,15567,15567,15567,63405,130,17969,17969,130,63405,15567,15567,15567,15567,15567,15567,63405,130,17969,17969,130,0,15567,15567,15567,15567,15567,15567,0,130,17969,17969,130,0,0,0,0,0,0,0,0,130,17969,0,130,8331,0,0,0,0,0,0,8331,130,0,0,130,8331,63405,63405,32956,32956,63405,63405,8331,130,0,0,130,32956,15567,15567,32956,32956,15567,15567,32956,130,0,0,130,32956,15567,15567,32956,32956,15567,15567,32956,130,0,17969,130,32956,15567,15567,32956,32956,15567,15567,32956,130,17969,17969,130,130,130,15567,32956,32956,15567,130,130,130,17969,17969,17969,17969,17969,130,130,130,130,17969,17969,17969,17969,
};
const uint16_t lollipopMan[]=
{
	17969,40224,40224,40224,40224,17969,17969,54815,24327,24327,24327,17969,17969,17969,40224,65535,49051,49051,65535,40224,17969,24327,24327,24327,24327,24327,17969,17969,40224,49051,65535,49051,49051,40224,17969,15759,65535,15759,65535,17969,17969,17969,40224,65535,49051,65535,49051,40224,17969,15759,4368,15759,4368,17969,17969,17969,40224,49051,65535,49051,65535,40224,17969,15759,15759,15759,15759,17969,17969,17969,17969,40224,40224,40224,40224,17969,17969,17969,15759,15759,17969,17969,17969,17969,17969,17969,30918,30918,15759,54815,24327,24327,54815,24327,24327,54815,24327,15759,17969,17969,17969,30918,15759,24327,24327,24327,54815,24327,24327,24327,24327,15759,17969,17969,17969,30918,17969,17969,17969,24327,54815,24327,24327,17969,17969,17969,17969,17969,17969,30918,17969,17969,17969,24327,54815,24327,24327,17969,17969,17969,17969,17969,17969,30918,17969,17969,17969,24327,24327,54815,24327,17969,17969,17969,17969,17969,17969,30918,17969,17969,17969,20156,20156,20156,20156,17969,17969,17969,17969,17969,17969,30918,17969,17969,17969,20156,20156,20156,20156,17969,17969,17969,17969,17969,17969,30918,17969,17969,17969,20156,20156,20156,20156,17969,17969,17969,17969,17969,17969,30918,17969,17969,17969,20156,20156,20156,20156,17969,17969,17969,17969,17969,17969,30918,17969,17969,17969,61307,61307,61307,61307,17969,17969,17969,
};
const uint16_t girl[]=
{
	17969,17969,49075,49075,49075,17969,17969,17969,49075,49075,4368,4368,4368,17969,49075,4368,4368,4368,47494,4368,4368,17969,4368,4368,65535,47494,65535,4368,17969,4368,47494,4368,47494,4368,17969,17969,4368,47494,47494,49075,47494,17969,4368,4368,17969,47494,47494,17969,17969,17969,17969,65535,1994,1994,65535,17969,17969,65535,65535,1994,1994,1994,65535,17969,65535,1994,1994,1994,1994,65535,17969,65535,1994,1994,1994,1994,65535,17969,47494,1994,1994,1994,1994,47494,17969,17969,1994,1994,20156,1994,17969,17969,17969,1994,1994,20156,1994,17969,17969,17969,47494,47494,65535,47494,17969,17969,17969,65535,65535,65535,65535,17969,
};
const uint16_t bunny[]=
{
	17969,17969,17969,17969,17969,64356,22355,17969,21843,22355,17969,17969,17969,17969,17969,17969,64356,22355,17969,21843,22355,17969,17969,17969,17969,17969,17969,22355,22355,17969,21843,22355,17969,17969,17969,17969,17969,17969,64356,22355,21843,22355,22355,17969,17969,17969,17969,17969,64356,22355,22355,22355,22355,22355,22355,17969,17969,17969,17969,64356,22355,4368,22355,4368,22355,21843,17969,17969,17969,17969,22355,22355,22355,57293,22355,21843,21843,17969,17969,17969,17969,22355,22355,22355,22355,21843,21843,21843,17969,16142,17969,17969,17969,21843,21843,21843,21843,21843,17969,30918,1994,1994,1994,30918,17969,16416,16416,16416,17969,17969,17969,17969,1994,17969,17969,17969,17969,16416,17969,17969,17969,17969,17969,1994,17969,17969,17969,17969,30918,17969,17969,17969,17969,17969,1994,1994,1994,1994,1994,1994,1994,17969,17969,17969,17969,1994,17969,17969,17969,17969,50281,1994,17969,17969,17969,17969,61307,65535,17969,17969,17969,61307,65535,17969,17969,17969,61307,65535,65535,65535,17969,61307,65535,65535,65535,17969,17969,17969,61307,65535,17969,17969,17969,61307,65535,17969,17969,  
};
const uint16_t explosion[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,264,792,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,16142,16142,16142,65315,65315,65315,65315,65315,65315,65315,38168,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,65535,16142,16142,16142,16142,16142,65315,65315,65315,65315,65315,65315,38168,38168,38168,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,65535,65535,16142,16142,16142,16142,16142,16142,16142,16142,16142,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,65535,16142,65315,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,38168,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,16142,65535,65535,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,38168,38168,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,16142,16142,16142,16142,16142,65535,65535,16142,16142,65315,65315,65315,65315,65315,16142,16142,16142,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,38168,38168,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,65535,65535,16142,16142,16142,16142,16142,65535,65535,16142,65315,65315,65315,65315,16142,16142,16142,16142,16142,16142,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,16142,16142,16142,16142,16142,65535,65535,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,38168,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,65535,65535,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,38168,65315,65315,65315,38168,38168,38168,38168,38168,38168,38168,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,16142,16142,16142,16142,16142,65535,65535,65535,65535,16142,16142,16142,16142,65315,65315,65315,16142,16142,16142,38168,38168,16142,16142,16142,65315,65315,38168,38168,38168,38168,4368,4368,38168,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,65535,65535,16142,16142,16142,16142,16142,65535,65535,65535,65535,16142,16142,16142,65315,65315,65315,65315,65315,16142,16142,38168,38168,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,65535,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,16142,65315,65315,65315,65315,65315,65315,65315,16142,16142,38168,65315,65315,65315,65315,65315,38168,38168,38168,65315,38168,38168,38168,38168,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,16142,16142,65535,65535,16142,16142,16142,16142,16142,16142,16142,65315,65315,65315,65315,16142,65315,65315,65315,65315,16142,65315,65315,65315,65315,65315,38168,38168,38168,65315,65315,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,16142,16142,65535,65535,16142,16142,16142,16142,16142,16142,16142,16142,16142,65535,16142,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,38168,38168,38168,65315,65315,65315,38168,38168,4368,4368,38168,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,65535,16142,16142,16142,16142,16142,16142,65535,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,38168,65315,65315,38168,38168,65315,65315,65315,38168,38168,38168,4368,4368,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,65315,16142,65315,65315,16142,16142,65315,65315,65315,65315,65315,65315,65315,38168,65315,65315,38168,38168,65315,65315,65315,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,65535,65535,16142,16142,65315,65315,65315,16142,16142,16142,16142,16142,16142,65315,65315,65315,38168,38168,38168,65315,38168,38168,65315,65315,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,65315,65315,16142,16142,16142,16142,16142,38168,65315,65315,65315,38168,38168,38168,38168,38168,65315,65315,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,65315,16142,16142,16142,16142,65315,16142,16142,16142,16142,38168,38168,65315,65315,65315,38168,38168,38168,65315,38168,38168,38168,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,65315,65315,65315,65315,16142,16142,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,38168,4368,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,4368,4368,4368,38168,4368,4368,4368,38168,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,38168,38168,38168,38168,4368,4368,4368,4368,38168,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65315,65315,65315,65315,65315,65315,65315,38168,38168,38168,38168,38168,38168,38168,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38168,38168,38168,38168,38168,38168,38168,38168,38168,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38168,38168,38168,4368,4368,4368,38168,38168,38168,38168,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14348,14348,14348,55066,55066,4368,4368,38168,38168,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,14348,14348,55066,55066,55066,55066,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,14348,14348,14348,55066,55066,55066,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30918,30918,61307,61307,18762,18762,65535,16142,14348,14348,55066,55066,55066,55066,4368,4368,4368,0,18762,61307,61307,30918,30918,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30918,30918,37788,61307,61307,61307,18762,18762,18762,65535,16142,14348,55066,65315,65315,38168,4368,4368,4368,18762,61307,37788,30918,30918,30918,61307,61307,61307,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30918,30918,30918,30918,30918,0,0,0,0,0,0,0,65535,16142,16142,65315,65315,65315,38168,38168,4368,18762,18762,37788,0,0,0,0,0,0,61307,30918,30918,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,39374,39374,39374,30918,30918,30918,0,0,0,0,0,0,0,0,65535,16142,16142,65315,65315,65315,38168,38168,4368,0,0,0,0,0,0,0,0,0,0,0,30918,30918,30918,0,0,0,0,0,0,0,0,0,0,0,0,0,39374,39374,0,0,0,0,0,0,0,0,0,0,0,0,65535,16142,16142,65315,65315,65315,38168,38168,4368,0,0,0,0,0,0,0,0,0,0,30918,30918,61307,30918,30918,0,0,0,0,0,0,0,0,0,0,0,0,39374,30918,30918,30918,30918,30918,30918,0,0,0,0,0,0,0,16142,16142,16142,65315,65315,38168,38168,4368,4368,0,0,0,0,0,0,30918,30918,30918,30918,61307,61307,30918,30918,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30918,30918,30918,30918,30918,30918,0,0,0,0,0,16142,16142,16142,14861,65315,38168,38168,4368,0,30918,30918,30918,30918,30918,30918,61307,61307,61307,61307,61307,30918,30918,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30918,30918,30918,30918,30918,30918,30918,30918,30918,30918,30918,30918,30918,30918,30918,30918,30918,37788,37788,37788,37788,61307,61307,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,30918,30918,30918,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,37788,0,0,0,0,0,0,0,0,0,0,0,0,9513,9513,9513,0,0,0,0,0,18762,18762,26161,26161,26161,9513,9513,9513,9513,0,0,0,0,0,0,0,0,16142,16142,16142,16142,14861,31267,31267,38168,38168,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9513,9513,18762,9513,9513,9513,0,0,9513,9513,26161,26161,26161,26161,26161,9513,9513,9513,9513,0,0,0,0,0,0,0,16142,16142,16142,65535,65315,65315,31267,38168,38168,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,9513,9513,18762,26161,26161,26161,9513,0,0,9513,9513,9513,9513,9513,9513,9513,9513,18762,9513,9513,9513,9513,0,0,0,0,16142,16142,16142,16142,65535,65315,65315,31267,38168,38168,4368,4368,4368,0,0,0,0,0,0,0,9513,9513,0,0,18762,26161,26161,26161,26161,26161,9513,9513,0,9513,9513,9513,9513,9513,9513,18762,26161,26161,9513,9513,9513,9513,18762,0,0,0,65535,16142,16142,16142,65315,65315,65315,31267,31267,38168,4368,4368,4368,4368,0,0,0,0,9513,9513,9513,9513,18762,18762,18762,26161,26161,26161,26161,9513,9513,9513,0,18762,9513,9513,18762,9513,9513,26161,26161,9513,9513,9513,9513,9513,9513,18762,0,65535,65315,65315,16142,65315,65315,65315,31267,31267,38168,38168,38168,4368,4368,4368,4368,0,0,9513,26161,26161,26161,9513,26161,26161,26161,26161,26161,26161,26161,26161,9513,9513,0,18762,26161,9513,9513,18762,9513,26161,26161,26161,9513,9513,9513,9513,9513,65315,65315,65315,16142,16142,65315,65315,65315,65315,38168,38168,38168,55586,55586,38168,38168,38168,4368,4368,4368,18762,18762,18762,18762,26161,26161,26161,26161,26161,26161,26161,26161,26161,9513,9513,0,26161,26161,9513,9513,9513,9513,9513,9513,9513,9513,9513,9513,9513,65315,16142,16142,16142,16142,65315,65315,65315,65315,65315,55586,55586,55586,55586,55586,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,4368,18762,26161,26161,26161,26161,26161,18762,9513,9513,9513,0,0,26161,9513,9513,9513,9513,9513,9513,9513,9513,65315,16142,16142,16142,16142,16142,16142,65315,65315,65315,65315,31267,31267,31267,31267,31267,31267,31267,31267,31267,38168,38168,38168,38168,38168,4368,4368,4368,4368,4368,26161,26161,26161,18762,9513,9513,9513,9513,9513,0,0,26161,9513,9513,18762,26161,26161,9513,9513,9513,9513,18762,26161,9513,14861,14861,14861,14861,65315,65315,14861,14861,14861,14861,55586,55586,55586,55586,55586,55586,38168,38168,38168,38168,38168,26161,26161,26161,26161,26161,26161,26161,9513,9513,9513,9513,9513,9513,0,0,0,0,0,9513,26161,26161,26161,9513,9513,9513,9513,9513,18762,9513,9513,9513,14861,14861,14861,14861,55586,55586,55586,55586,55586,55586,55586,55586,55586,38168,38168,26161,26161,26161,26161,26161,26161,26161,26161,9513,9513,9513,9513,9513,9513,9513,9513,0,0,0,
};
const uint16_t kids[]=
{
65535,0,0,65535,0,0,65535,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,0,61307,31975,0,61307,30918,0,46509,61307,0,0,0,0,0,0,0,0,0,0,0,0,40183,40183,40183,40183,40183,40183,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,31975,0,0,61307,31975,0,61307,30918,0,46509,61307,0,0,0,0,0,0,0,0,0,40183,40183,40183,55246,55246,55246,55246,55246,55246,40183,40183,40183,0,0,0,0,0,0,0,0,0,0,0,0,0,0,31975,46509,0,0,31975,30918,0,46509,30918,0,46509,61307,0,0,0,0,0,0,0,0,40183,55246,55246,55246,5565,5565,5565,5565,5565,5565,55246,55246,55246,40183,40183,0,0,0,0,0,0,0,0,0,0,0,31975,46509,46509,0,0,31975,30918,0,46509,30918,0,46509,61307,0,0,0,0,0,0,40183,40183,55246,55246,5565,5565,5565,5565,5565,5565,5565,5565,5565,5565,55246,55246,55246,40183,0,0,0,0,0,0,0,0,0,0,31975,46509,30918,0,0,31975,30918,0,46509,30918,0,46509,61307,0,0,0,0,0,0,40183,55246,55246,5565,5565,5565,47318,47318,47318,47318,47318,47318,5565,5565,5565,55246,55246,40183,0,0,0,0,0,0,0,0,0,0,31975,46509,30918,0,0,31975,30918,0,46509,30918,0,46509,61307,0,0,0,0,0,40183,55246,55246,5565,5565,47318,47318,47318,47318,47318,47318,47318,47318,47318,47318,5565,5565,55246,55246,40183,0,0,0,0,0,0,0,0,0,31975,46509,30918,0,0,61307,30918,30918,30918,30918,30918,46509,46509,0,0,0,0,40183,55246,55246,5565,5565,47318,47318,47318,47318,0,0,47318,47318,47318,47318,47318,47318,5565,5565,55246,55246,40183,0,0,0,0,0,0,0,0,31975,46509,30918,0,0,0,61307,46509,30918,46509,46509,46509,0,0,0,0,0,40183,55246,5565,5565,47318,47318,47318,47318,47318,0,0,0,47318,47318,47318,47318,47318,47318,5565,5565,55246,40183,0,0,0,0,0,0,0,0,31975,46509,30918,0,0,0,0,0,46509,61307,0,0,0,0,0,0,0,40183,55246,5565,5565,47318,47318,47318,47318,47318,0,65535,0,0,47318,47318,47318,47318,47318,47318,5565,55246,40183,0,0,0,0,0,0,0,0,31975,46509,30918,0,0,0,0,0,46509,61307,0,0,0,0,0,0,40183,55246,5565,5565,47318,47318,47318,47318,47318,0,0,65535,46509,0,47318,47318,47318,47318,47318,47318,5565,5565,55246,40183,0,0,0,0,0,0,0,31975,46509,30918,0,0,0,0,0,46509,61307,0,0,0,0,0,0,40183,55246,5565,5565,47318,47318,47318,47318,47318,0,65535,46509,0,0,0,0,0,47318,47318,47318,46509,38333,55246,40183,0,0,0,0,0,0,0,31975,46509,30918,0,0,0,0,0,30918,61307,0,0,0,0,0,0,40183,55246,62909,62909,47318,47318,47318,47318,47318,0,46509,0,0,65535,65535,46509,65535,0,47318,47318,62909,62909,55246,40183,0,0,0,0,0,0,0,0,46509,30918,0,0,0,0,0,30918,61307,0,0,0,0,0,0,40183,55246,62909,62909,47318,47318,47318,47318,12428,0,0,0,46509,46509,46509,46509,46509,0,47318,47318,62909,62909,55246,40183,0,0,0,0,0,0,0,0,46509,46509,0,0,0,0,0,30918,61307,0,0,0,0,0,0,38333,38333,40183,40183,47318,47318,47318,16162,0,0,0,65535,65535,65535,65535,0,0,47318,47318,47318,40183,40183,38333,38333,0,0,0,0,0,0,0,0,0,46509,0,0,0,0,0,30918,61307,0,0,0,0,0,0,38333,38333,40183,40183,47318,47318,0,0,0,16162,0,0,0,0,0,12428,47318,47318,47318,47318,40183,40183,38333,38333,0,0,0,0,0,0,0,0,0,46509,0,0,0,0,0,30918,61307,0,0,0,0,0,0,0,38333,38333,40183,47318,0,12428,0,0,0,12428,0,12428,0,47318,47318,47318,47318,47318,47318,40183,38333,38333,0,0,0,0,0,0,0,0,0,0,30918,0,0,0,0,0,30918,61307,0,0,0,0,0,0,0,38333,38333,40183,40183,47318,47318,12428,0,47318,47318,0,47318,12428,0,0,47318,47318,47318,40183,40183,38333,38333,0,0,0,0,0,0,0,0,0,0,30918,0,0,0,0,0,30918,61307,0,0,0,0,0,0,0,38333,38333,38333,40183,40183,47318,0,47318,47318,47318,0,47318,47318,12428,12428,47318,47318,40183,40183,38333,38333,38333,0,0,0,0,0,0,0,0,0,0,30918,0,0,0,0,0,30918,61307,0,0,0,0,0,0,0,0,38333,38333,38333,40183,40183,47318,47318,47318,47318,47318,47318,47318,47318,47318,47318,40183,40183,38333,38333,38333,0,0,0,0,0,0,0,0,0,0,0,30918,0,0,0,0,0,30918,61307,0,0,0,0,0,0,0,0,38333,38333,38333,38333,40183,40183,47318,47318,47318,47318,47318,47318,47318,47318,40183,40183,38333,38333,38333,0,0,0,0,0,0,0,0,0,0,0,0,30918,0,0,0,0,0,30918,61307,0,0,0,0,0,0,0,0,0,38333,38333,38333,38333,40183,40183,40183,40183,40183,40183,40183,40183,40183,40183,38333,38333,38333,38333,0,0,0,0,0,0,0,0,0,0,0,31975,30918,0,0,0,0,0,46509,61307,0,0,0,0,0,0,0,0,0,0,0,38333,38333,38333,38333,40183,40183,40183,40183,40183,40183,38333,38333,38333,38333,0,0,0,0,0,0,0,0,0,0,0,0,0,31975,30918,0,0,0,0,0,46509,61307,0,0,0,0,0,0,0,0,0,0,0,0,38333,38333,38333,38333,38333,38333,38333,38333,38333,38333,38333,38333,0,0,0,0,0,0,0,0,0,0,0,0,0,0,31975,61307,0,0,0,0,0,46509,61307,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38333,38333,38333,38333,38333,38333,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,61307,61307,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65535,
};
const uint16_t wife[]=
{
9232,2081,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,42777,42777,1817,1817,1817,17945,9232,9232,0,0,0,0,0,0,0,0,0,0,0,0,0,9232,2081,9232,17945,2081,2081,35625,35625,2081,2081,2081,2858,2858,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,1817,1817,30516,30516,30516,30516,30516,30516,30516,30516,30516,30516,0,0,0,0,0,0,0,9232,2081,9232,17945,2081,35625,35625,35625,35625,35625,2858,2858,2858,59937,59937,59937,59937,59937,59937,52009,59937,59937,17945,9232,9232,42777,42777,42777,30516,30516,23869,23869,23869,40518,40518,40518,40518,7750,30516,30516,0,0,0,0,0,0,9232,2081,9232,17945,2081,35625,35625,35625,35625,35625,2858,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,17945,9232,9232,42777,42777,42777,30516,30516,23869,23869,40518,40518,40774,40774,40518,7750,7750,30516,30516,0,0,0,0,0,9232,2081,9232,17945,2081,35625,35625,35625,35625,35625,2858,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,17945,9232,9232,42777,42777,42777,30516,23869,23869,40518,40518,40774,40774,40774,40518,40518,40518,7750,30516,0,0,0,0,0,9232,2081,9232,17945,2081,35625,35625,35625,2858,2858,52009,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,17945,9232,9232,42777,42777,42777,30516,30516,23869,40518,40518,40518,40774,40774,40774,40774,40518,7750,30516,30516,0,0,0,0,9232,2081,9232,17945,2081,35625,35625,35625,2858,2858,52009,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,17945,9232,9232,42777,42777,42777,42777,30516,30516,30516,7750,7750,40774,40774,40774,40518,40518,7750,30516,30516,0,0,0,0,9232,2081,9232,17945,2081,35625,35625,35625,35625,2858,52009,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,17945,9232,9232,42777,42777,42777,63076,15485,30516,30516,30516,7750,40774,40774,40774,40518,7750,7750,30516,30516,30516,0,0,0,9232,2081,9232,17945,2081,2081,35625,35625,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,17945,9232,9232,42777,42777,42777,63076,15485,15485,15485,30516,7750,7750,40774,40774,40518,7750,23869,23869,30516,30516,0,0,0,9232,2081,9232,17945,2081,2081,35625,35625,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,17945,9232,9232,42777,42777,42777,63076,15485,15485,15485,30516,30516,7750,40774,40774,40518,7750,7750,23869,30516,30516,0,0,0,9232,2081,9232,17945,2081,2081,35625,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,63076,4368,15485,15485,15485,30516,7750,7750,40774,40518,40518,23869,30516,30516,0,0,0,0,9232,2081,9232,17945,2081,2081,35625,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,63076,15485,15485,15485,15485,30516,23869,23869,40774,40518,40518,23869,30516,30516,0,0,0,0,9232,2081,9232,17945,2081,2081,35625,59937,2858,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,42777,63076,63076,63076,63076,30516,30516,23869,23869,40518,40518,23869,30516,30516,0,0,0,0,9232,2081,9232,17945,2081,35625,35625,2858,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,42777,42777,63076,63076,7323,7323,30516,30516,23869,40774,40518,23869,30516,30516,0,0,0,0,9232,2081,9232,17945,2081,35625,35625,2858,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,42777,63076,15485,15485,63076,7323,15485,30516,23869,23869,7750,7750,23869,30516,30516,0,0,0,9232,2081,9232,17945,2081,35625,2858,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,42777,15485,15485,15485,63076,55972,7323,15485,30516,23869,7750,7750,23869,23869,30516,30516,0,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,63076,15485,15485,15485,63076,55972,7323,15485,30516,23869,23869,23869,23869,23869,23869,30516,0,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,63076,15485,15485,15485,63076,55972,7323,7323,30516,23869,23869,23869,23869,30516,30516,30516,0,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,63076,15485,15485,15485,63076,55972,56756,7323,30516,30516,30516,30516,30516,63076,63076,0,0,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,42777,63076,15485,15485,15485,63076,55972,56756,56756,56756,7323,63076,63076,15485,15485,63076,0,0,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,17945,9232,9232,42777,42777,63076,15485,15485,15485,15485,63076,55972,56756,56756,56756,7323,0,63076,15485,15485,63076,63076,0,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,17945,17945,59937,17945,9232,9232,42777,63076,63076,15485,15485,15485,63076,55972,55972,56756,56756,56756,7323,0,63076,15485,15485,15485,63076,0,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,17945,17945,17945,17945,17945,9232,9232,63076,63076,15485,15485,15485,15485,63076,55972,56756,56756,56756,56756,7323,0,0,63076,15485,15485,63076,0,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,9232,9232,9232,9232,17945,17945,9232,9232,15485,15485,15485,15485,15485,63076,55972,55972,56756,56756,56756,56756,7323,0,0,63076,15485,15485,15485,63076,0,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,42777,42777,42777,17945,17945,17945,9232,17945,17945,9232,9232,15485,15485,15485,63076,63076,55972,55972,56756,56756,56756,56756,56756,7323,7323,0,63076,63076,15485,15485,63076,63076,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,17945,17945,17945,17945,17945,17945,9232,17945,17945,9232,9232,63076,63076,63076,63076,55972,55972,56756,56756,56756,56756,56756,56756,56756,7323,0,0,63076,15485,15485,15485,63076,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,17945,17945,59937,9232,9232,9232,9232,17945,17945,9232,9232,55972,55972,55972,55972,55972,55972,56756,56756,56756,56756,56756,56756,56756,56756,7323,7323,0,63076,15485,15485,63076,9232,2081,9232,17945,2081,35625,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,17945,17945,59937,17945,9232,9232,55972,55972,55972,55972,56756,56756,56756,56756,56756,56756,57293,56756,56756,56756,56756,7323,7323,63076,15485,15485,63076,9232,2081,9232,17945,2081,35625,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,56756,56756,56756,56756,56756,56756,57293,56756,56756,56756,57293,57293,56756,56756,56756,56756,56756,55972,63076,15485,15485,9232,2081,9232,17945,2081,35625,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,60201,17945,9232,9232,56756,56756,56756,56756,56756,57293,57293,56756,56756,56756,56756,57293,57293,56756,56756,56756,56756,55972,55972,55972,63076,9232,2081,9232,17945,2081,35625,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,60201,17945,9232,9232,56756,56756,56756,56756,57293,57293,56756,56756,57293,56756,56756,56756,57293,57293,57293,56756,56756,56756,56756,55972,63076,9232,2081,9232,17945,2081,35625,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,56756,56756,56756,57293,57293,57293,56756,56756,57293,57293,56756,56756,57293,57293,57293,57293,56756,56756,56756,56756,55972,9232,2081,9232,17945,2081,35625,59937,59937,52009,59937,59937,59937,59937,59937,60201,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,56756,57293,57293,57293,57293,57293,56756,56756,57293,57293,57293,56756,56756,56756,57293,57293,57293,56756,56756,56756,56756,9232,2081,9232,17945,2081,35625,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,57293,57293,57293,57293,57293,56756,56756,56756,57293,57293,57293,56756,56756,56756,56756,57293,57293,57293,57293,57293,56756,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,57293,57293,57293,57293,57293,56756,56756,56756,57293,57293,57293,57293,56756,56756,56756,56756,57293,57293,57293,57293,57293,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,57293,57293,57293,57293,56756,56756,56756,56756,57293,57293,57293,57293,56756,56756,56756,56756,56756,57293,57293,57293,57293,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,57293,57293,57293,57293,56756,56756,56756,56756,57293,57293,57293,57293,57293,56756,56756,56756,56756,56756,56756,57293,57293,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,57293,57293,57293,56756,56756,56756,56756,56756,57293,57293,57293,57293,57293,56756,56756,56756,56756,56756,56756,56756,56756,9232,2081,9232,17945,2081,35625,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,57293,57293,57293,56756,56756,56756,56756,56756,57293,57293,57293,57293,57293,57293,56756,56756,56756,56756,56756,56756,56756,9232,2081,9232,17945,2081,35625,2858,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,7323,57293,57293,56756,56756,56756,56756,56756,57293,57293,57293,57293,57293,57293,56756,56756,56756,7323,7323,7323,7323,9232,2081,9232,17945,2081,35625,2858,59937,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,7323,57293,57293,56756,56756,56756,56756,56756,57293,57293,57293,57293,57293,57293,57293,56756,7323,7323,7323,0,0,9232,2081,9232,17945,2081,35625,2858,2858,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,7323,57293,57293,56756,56756,56756,56756,56756,56756,57293,57293,57293,57293,57293,57293,7323,7323,0,0,0,0,9232,2081,9232,17945,2081,35625,60201,2858,59937,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,17945,7323,7323,56756,56756,56756,56756,56756,56756,57293,7323,7323,7323,7323,7323,7323,0,0,0,0,0,9232,2081,9232,17945,2081,35625,60201,2858,2858,52009,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,59937,17945,9232,9232,17945,7323,7323,7323,7323,56756,56756,56756,7323,7323,7323,46692,63076,0,0,0,0,0,0,0,0,9232,2081,9232,17945,2081,2081,2081,59937,2858,52009,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,17945,9232,9232,17945,17945,17945,17945,7323,7323,7323,7323,7323,63076,46692,46692,63076,0,0,0,0,0,0,0,0,9232,2081,9232,17945,17945,17945,2081,2081,2081,59937,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,17945,9232,9232,17945,17945,17945,17945,17945,63076,46692,46692,63076,63076,15485,15485,63076,0,0,0,0,0,0,0,0,9232,2081,9232,9232,9232,9232,9232,17945,2081,2081,59937,59937,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,17945,9232,9232,17945,17945,17945,17945,17945,63076,46692,15485,63076,63076,15485,15485,15485,63076,0,0,0,0,0,0,0,9232,2081,2081,2081,2081,2081,9232,9232,9232,17945,17945,17945,59937,59937,59937,59937,59937,52009,59937,59937,59937,59937,17945,9232,9232,17945,17945,17945,17945,17945,63076,15485,15485,63076,63076,15485,15485,15485,63076,63076,0,0,0,0,0,0,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,9232,63076,15485,15485,63076,63076,63076,15485,15485,15485,7323,7323,0,0,0,0,0,
};
const uint16_t Cake[]=
{
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3600,3600,3600,3600,3600,3600,3600,33596,33596,8747,8747,33596,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3600,5656,5656,4888,4888,4624,4888,4888,3600,8747,8747,33596,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3600,5656,65535,65535,4888,4888,4888,4624,4888,4888,3600,8747,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3600,5656,4888,4888,4888,4888,4888,4888,4888,4888,4624,3600,33596,33596,33596,33596,33596,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3600,5656,4624,4888,4888,4624,4888,4888,4888,4624,4624,3600,8747,8747,8747,33596,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3600,5656,4888,4888,4888,4888,4888,4624,4624,4624,4888,3600,33596,33596,33596,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,49092,49092,3600,4624,4888,4624,4624,4624,4624,4624,4624,3600,49092,49092,8747,33596,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3888,49092,49092,65518,3600,4624,4624,4624,4624,4624,4624,3600,3600,65518,65518,65518,49092,3888,33596,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3888,3888,55889,49092,65518,65518,65518,3600,3600,3600,3600,3600,3600,65518,65518,65518,65518,65518,65518,55889,3888,3888,0,0,0,65535,0,0,0,0,0,0,0,0,0,0,0,0,3888,3888,55889,55889,55889,55889,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,49092,55889,55889,55889,3888,3888,0,65535,0,0,0,0,0,0,0,0,0,0,0,3888,55889,55889,55889,55889,55889,55889,65518,49092,65518,49092,65518,65518,65518,65518,65518,65518,65518,65518,65518,49092,55889,55889,55889,55889,55889,55906,65535,65535,65535,0,0,0,0,0,0,0,0,0,3888,55889,55889,55889,55889,55889,55889,55889,55889,55889,49092,49092,49092,49092,65518,65518,49092,49092,49092,49092,49092,55889,55889,55889,55889,55889,55889,65535,65535,65535,65535,65535,0,0,0,0,0,0,0,3888,55906,55906,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,49092,49092,55889,55889,55889,55889,55889,55889,55889,55889,65535,55889,55889,55906,65535,65535,65535,0,0,0,0,0,0,0,0,3888,55906,55906,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55906,55906,55906,55906,65535,3888,0,0,0,0,0,0,0,0,3888,55906,55906,55906,55906,55906,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55906,55906,55906,55906,55889,65535,3888,0,0,0,0,0,0,0,0,3888,55889,55889,55906,55906,55906,55906,55906,55906,55906,55906,55889,55889,55889,55889,55889,55889,55889,55889,55889,55906,55906,55906,55906,55906,55906,55906,55889,55889,55889,55889,3888,0,0,0,0,0,0,0,0,3888,55889,55889,55889,55889,65535,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55906,55889,55889,55889,55889,55889,3888,0,0,0,0,0,0,0,0,3888,55889,55889,55889,55889,55889,55889,55889,55906,55906,55906,55906,55906,55906,55906,55906,65535,55906,55906,55906,55906,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,3888,0,0,0,0,0,0,0,0,20282,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,20282,0,0,0,0,0,0,0,0,20282,21579,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,55889,21579,20282,0,0,0,0,0,0,0,0,65476,20282,21843,21579,55889,55889,55889,55889,55889,21579,21579,55889,55889,55889,55889,55889,21579,21579,21579,55889,55889,55889,55889,55889,55889,55889,55889,55889,21579,21843,20282,65476,0,0,0,0,0,0,0,0,65476,65518,20282,21843,21579,55889,55889,55889,21579,21843,21843,21843,55889,55889,55889,21843,21843,21843,21843,21843,55889,55889,21579,21579,55889,55889,55889,21579,21843,20282,65518,65476,0,0,0,0,0,0,0,0,65476,65518,65518,20282,20282,21579,21579,21579,21843,22355,22355,21843,21843,21843,21843,21843,22355,22355,22355,21843,21843,21843,21843,21843,21843,21843,21843,20282,20282,65518,65518,65476,0,0,0,0,0,0,0,0,65476,65518,65518,65518,65518,20282,20282,21843,22355,22355,22355,22355,21843,21843,21843,22355,22355,22355,22355,22355,21843,21843,22355,65535,22355,20282,20282,65518,65518,65518,49092,65476,0,0,0,0,0,0,0,0,6778,65476,65518,65518,65518,65518,65518,20282,20282,20282,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,20282,20282,20282,65518,65518,65518,65518,65518,8108,6778,0,0,0,0,0,0,0,0,6778,6778,49092,16333,65518,65518,65518,65518,65518,65518,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,65518,65518,65518,65518,65518,65518,65518,65476,6778,65476,0,0,0,0,0,0,0,0,49092,65518,6778,49092,16333,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,16333,16333,6778,65518,65476,0,0,0,0,0,0,0,0,49092,65518,65518,6778,6778,49092,16333,16333,16333,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,16333,65518,16333,65476,6778,6778,65518,65518,65476,0,0,0,0,0,0,0,0,49092,65535,65518,65518,65518,6778,6778,49092,49092,16333,16333,16333,16333,65518,65518,65518,65518,65518,65518,65518,16333,16333,49092,49092,49092,6778,6778,65518,65518,65518,49092,6778,0,0,0,0,0,0,0,0,6778,49092,16333,65518,65518,65518,65518,6778,6778,6778,49092,49092,49092,16333,16333,16333,16333,16333,16333,16333,49092,49092,6778,6778,6778,65518,65518,65518,65518,49092,49092,6778,0,0,0,0,0,0,0,0,20282,6778,49092,16333,65518,65518,65518,65518,65518,65518,6778,6778,6778,6778,6778,6778,6778,6778,6778,6778,6778,6778,65518,65518,65518,65518,65518,65518,49092,49092,6778,20282,0,0,0,0,0,0,0,0,20282,22355,6778,49092,16333,16333,16333,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,49092,49092,49092,6778,22355,20282,0,0,0,0,0,0,0,0,20282,22355,22355,6778,6778,49092,49092,16333,16333,16333,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,65518,16333,65518,49092,49092,6778,6778,22355,21843,20282,0,0,0,0,0,0,0,0,20282,21843,21843,22355,22355,6778,6778,49092,49092,49092,16333,65518,65518,65518,65518,16333,16333,16333,16333,16333,65518,16333,49092,49092,49092,6778,6778,22355,22355,21843,21843,20282,0,0,0,0,0,0,0,0,20282,21579,21843,21843,22355,22355,22355,6778,6778,6778,49092,49092,49092,49092,49092,49092,49092,49092,49092,49092,49092,49092,6778,6778,6778,22355,22355,22355,21843,65535,21579,20282,0,0,0,0,0,0,0,0,0,20282,21579,21843,21843,22355,22355,22355,22355,22355,6778,6778,6778,6778,6778,6778,6778,6778,6778,6778,6778,6778,22355,22355,22355,22355,22355,21843,21843,21579,20282,0,0,0,0,0,0,0,0,0,0,0,20282,21579,21843,21843,22355,65535,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,22355,21843,21579,21579,20282,0,0,0,0,0,0,0,0,0,0,0,0,0,20282,20282,21843,21843,21843,21843,21843,21843,21843,21843,21843,21843,21843,21843,21843,21843,21843,65535,21843,21843,21843,21843,21843,21579,20282,20282,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20282,20282,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,21579,20282,20282,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,20282,0,0,0,0,0,0,0,0,0,0,0,
};
const uint16_t homeless[]=
{
0,0,0,0,0,58640,58640,58640,0,0,58640,58640,58640,58640,0,0,0,0,0,0,0,0,0,0,58640,58640,22355,58640,58640,58640,58640,22355,22355,58640,58640,58640,58640,0,0,0,0,0,0,58640,58640,22355,22355,22355,22355,58640,22355,22355,22355,22355,22355,22355,22355,58640,0,0,0,0,58640,22355,22355,22355,22355,22355,58640,58640,58640,22355,22355,22355,22355,22355,22355,58640,0,0,0,0,58640,22355,22355,22355,58640,58640,44338,44338,58640,58640,58640,58640,22355,22355,58640,0,0,0,0,0,0,58640,22355,58640,44338,44338,44338,44338,44338,44338,44338,58640,58640,58640,58640,0,0,0,0,0,0,58640,58640,58640,44338,44338,44338,44338,44338,44338,44338,44338,58640,58640,58640,58640,58640,0,0,58640,58640,58640,22355,22355,58640,58640,58640,44338,44338,44338,44338,58640,22355,22355,22355,22355,58640,0,0,58640,58640,22355,22355,22355,22355,22355,22355,58640,58640,44338,58640,22355,22355,22355,22355,58640,0,0,0,0,58640,58640,22355,22355,22355,22355,22355,22355,22355,58640,22355,22355,22355,22355,58640,58640,0,0,0,0,58640,58640,58640,58640,22355,22355,22355,22355,58640,58640,58640,22355,22355,58640,22355,58640,0,0,0,0,58640,22355,22355,22355,18201,18201,18201,18201,22355,22355,58640,58640,58640,22355,22355,58640,0,0,0,0,58640,22355,22355,22355,22355,22355,22355,22355,22355,22355,58640,22355,22355,22355,58640,58640,0,0,0,0,58640,22355,22355,22355,22355,22355,22355,30918,30918,22355,58640,22355,22355,58640,58640,0,0,0,0,0,58640,58640,58640,22355,22355,22355,22355,22355,22355,22355,58640,22355,58640,58640,0,0,0,0,0,0,0,0,58640,58640,58640,22355,22355,22355,22355,22355,58640,58640,58640,0,0,0,0,0,0,0,0,0,0,0,58640,58640,58640,58640,58640,58640,58640,58640,0,0,0,0,0,0,
};

// Music variables
uint32_t tune1_notes[]= { C5, DS5_Eb5, F5, DS5_Eb5, F5, F5, F5, AS5_Bb5, GS5_Ab5, G5, F5, G5, G5, AS5_Bb5, C6, F5, DS5_Eb5, AS5_Bb5, AS5_Bb5, G5, AS5_Bb5, C6, AS5_Bb5};
uint32_t tune1_times[]={ 600, 500, 333, 333, 333, 353, 333, 333, 333, 333, 333, 625, 353, 270, 333, 500, 333, 333, 333, 333, 500, 396 };
uint32_t tune2_notes[]={0};
uint32_t tune2_times[]={100};
//Variables for background music
uint32_t *notes;
uint32_t *note_times;
int tune_playing=0;
int tune_length=4;
int tune_index=0;
int tune_time_remaining=0;
int tune_repeat=0;



// Start main
int main()
{
	// Main variables
	uint16_t toggle;
	uint16_t hmoved;
	uint16_t vmoved;
	uint16_t i;
	uint16_t popUp;
	uint16_t hit = 0;
	
	uint16_t highScore = 0;
	uint16_t gameScore = 0;

	uint16_t lives;
	uint16_t distance;
	uint16_t speed;
	uint16_t day = 0;
	uint16_t deliverys;
	uint16_t timer;

	uint16_t x;
	uint16_t y;
	uint16_t oldx;
	uint16_t oldy;

	uint16_t girlx;
	uint16_t girly;
	uint16_t girlTimer;
	uint16_t girlGo;

	uint16_t lolli_y;
	uint16_t lolliTimer;
	uint16_t lolliGo;

	uint16_t bunny_x = 96;
	uint16_t bunny_y = 35;
	uint16_t bunnyTimer;
	uint16_t bunnyGo;
	char key = '\0';
	int keyPressed =0;
	
	//To initialise tasks
	initClock();
	initSysTick();
	initSerial();
	setupIO();
	display_begin();
	initSound();
	//menu
	while(1)
	{	
		//title screen
		day = titleScreen(day, highScore);

		//game start
		while(day > 0)
		{	
			//Define variables
			toggle = 0;
			hmoved = 0;
			vmoved = 0;
			speed = 5;
			popUp = 0;

			x = 60;
			y = 100;
			oldx = x;
			oldy = y;

			//Car x values: 25-37, 47-59, 69-81, 91-103
			uint16_t carx[] = {25, 47, 69, 91};
			uint16_t cary[] = {16,16,16,16};
			uint16_t carGo[] = {0,0,0,0};
			uint16_t carTimer[] = {((random(0,6))*1000),((random(0,6))*1000),((random(0,6))*1000),((random(0,6))*1000)};
			
			girlx = 20;
			girly = 35;
			girlTimer = (random(5,15))*1000;
			girlGo = 0;

			lolli_y = 16;
			lolliTimer = (random(10,20))*1000;
			lolliGo = 0;

			bunny_x = 96;
			bunny_y = 35;
			bunnyTimer = (random(10,15))*1000;
			bunnyGo = 0;

			milliseconds = 0;
			timer=1000;

			lives = 3;
			distance = 800;
			deliverys = 0;


			
			// Background
			for(i=0;i<=160;i++)
			{
				putImage(0, i, 128, 1, Background, 0, 0);
			}
			
			//game being played
			while(milliseconds <= 40000 && lives > 0)
			{
				//To display the hearts for lives
				putImage(2,2,18,16,heart1,0,0);
				switch (lives)
				{
				case 1:
					putImage(22,2,18,16,heart0,0,0);
					putImage(42,2,18,16,heart0,0,0);
					break;
				case 2:
					putImage(22,2,18,16,heart1,0,0);
					putImage(42,2,18,16,heart0,0,0);
					break;
				case 3:
					putImage(22,2,18,16,heart1,0,0);
					putImage(42,2,18,16,heart1,0,0);
					break;
				}//end switch
					

				// display distance
				printDistance(distance, 80, 2, RGBToWord(0xff,0xff,0), 17969);
				
				// display car
				putImage(x,y,12,20,car,0,0);

				// changes distance every second + removes popups after a second
				if(milliseconds >= timer)
				{
					if (distance >= (50 + ((speed-1)*25 )))
					{
						distance = distance - (50 + ((speed-1)*25 ));
						if (popUp == 1)
						{
							fillRectangle(25,25,80,7,17969);
							popUp=0;
						}//end if 
					} //end if
					else	// if distance < 0
					{
						distance = distance + 800;
						deliverys++;
						fillRectangle(25,25,80,7,17969);
						printText("+1 delivery", 25, 25, RGBToWord(0xff,0xff,0), 17969);
						popUp=1;
					}//end else
					timer= timer+1000;
					
				}//end if (milliseconds >= timer)


				// Displays obstacles when timer runs out and resets timers
				for(i=0;i<=3;i++)
				{
					if (milliseconds >= carTimer[i])
					{
						carGo[i] = 1;
						carTimer[i] = (random(0,(11-speed)))*1000;
						carTimer[i] = milliseconds+carTimer[i];
					}//end if
				}//end for
				if (milliseconds >= lolliTimer)
					{
						lolliGo = 1;
						lolliTimer = (random(12,(27-speed)))*1000;
						lolliTimer = milliseconds+lolliTimer;
					}//end if
				if (milliseconds >= girlTimer)
					{
						girlGo = 1;
						girlTimer = (random(14,(29-speed)))*1000;
						girlTimer = milliseconds+girlTimer;
					}//end if
				if (milliseconds >= bunnyTimer)
					{
						bunnyGo = 1;
						bunnyTimer = (random(16,(31-speed)))*1000;
						bunnyTimer = milliseconds+bunnyTimer;
					}//end if
				

				hmoved = vmoved = 0;

				//To use your keyboard as a controller
				if (dataAvailable())
				{
					key = egetchar();
					keyPressed = 1;
				}
				else
				{
					key = '\0';
					keyPressed = 0;
				}
				switch (key)
				{
					case 'a': //left pressed
						if (x > 20)
							{
								x = x - 5;
								hmoved = 1;
							}	
							break;
					case 'd': //right pressed
						if (x < 94)
							{
								x = x + 5;
								hmoved = 1;
							}	
							break;
					case 'w': //up pressed
						if (speed < 9)
							{
								speed = speed + 2;
							}
							break;
					case 's': //down pressed
						if (speed > 1)
							{
								speed = speed - 2;
							}
							break;
					case 't': //to play music
						playTune(tune1_notes, tune1_times, 22, 1);
						break;
					case 'r'://to stop the music
						playTune(tune2_notes, tune2_times,1,1);
						break;
				}

				if (!keyPressed)
				{
					hmoved = 0;
				}

				//For movement using buttons
				if ((GPIOB->IDR & (1 << 5))==0) // left pressed
				{			
				
					if (x > 20)
					{
						x = x - 5;
						hmoved = 1;
					}			
				}
				if ((GPIOB->IDR & (1 << 4))==0) // right pressed
				{					
					if (x < 94)
					{
						x = x + 5;
						hmoved = 1;
					}						
				}
				if ( (GPIOA->IDR & (1 << 8)) == 0) // up pressed
				{			
					if (speed < 9)
					{
						speed = speed + 2;
					}
				}
				if ( (GPIOA->IDR & (1 << 11)) == 0) // down pressed
				{
					if (speed > 1)
					{
						speed = speed - 2;
					}
				}
				
				if ((vmoved) || (hmoved))
				{
					// only redraw if there has been some movement (reduces flicker)
					fillRectangle(oldx,oldy,12,20,17969);
					oldx = x;
					oldy = y;					
					if (hmoved)
					{
						if (toggle)
						{
							putImage(x,y,12,20,car,0,0);
						}
						else
						{
							putImage(x,y,12,20,car,0,0);
						}
						toggle = toggle ^ 1;
					}
					else
					{
						putImage(x,y,12,20,car,0,0);
					}
					
				}

				for(i=0;i<=3;i++)
				{
					if (carGo[i] == 1)	// starts car movement
					{
						if (cary[i] <= 140)
						{ 
							fillRectangle(carx[i],cary[i],12,20,17969);
							cary[i] = cary[i] + speed;

							switch (i)
							{
							case 0:
								putImage(carx[i],cary[i],12,20,car0,0,0);
								break;
							case 1:
								putImage(carx[i],cary[i],12,20,car1,0,0);
								break;
							case 2:
								putImage(carx[i],cary[i],12,20,car2,0,0);
								break;
							case 3:
								putImage(carx[i],cary[i],12,20,car3,0,0);
								break;
							}
							
							// if collides with car
							if (isInside(carx[i],cary[i],12,20,x,y) || isInside(carx[i],cary[i],12,20,x+12,y))
							{
								fillRectangle(carx[i],cary[i],12,20,17969);
								lives = lives-1;
								cary[i] = 141;	// resets car
								GPIOB->ODR |= (1 << 3);
								delay(100);  
								GPIOB->ODR &= ~(1 << 3);
							}

						}
						else if(cary[i] > 140)
						{
							fillRectangle(carx[i],cary[i],12,20,17969);
							cary[i] = 16;
							carGo[i] = 0;
						}
					}
				}

				if (lolliGo == 1)	// starts lollipopman movement
				{
					if (lolli_y <= 140)
					{
						fillRectangle(56,lolli_y,14,16,17969);
						lolli_y = lolli_y + (ceil(speed/2)+1);

						putImage(56,lolli_y,14,16,lollipopMan,0,0);
							
						// if collides with car
						if (isInside(56,lolli_y,14,16,x,y) || isInside(56,lolli_y,14,16,x+12,y))
						{
							fillRectangle(56,lolli_y,14,16,17969);
							if (lives < 3)	// gain life if lives<3
							{
								lives++;
								fillRectangle(25,25,80,7,17969);
								printText("+1 life", 25, 25, RGBToWord(0xff,0xff,0), 17969);
							}
							else	// if lives = 3
							{
								// gives 10 additional seconds and adjusts timers
								for (i=0;i<=3;i++)
								{
									carTimer[i] = fixTimer(carTimer[i]);
								}
								timer = fixTimer(timer);
								lolliTimer = fixTimer(lolliTimer);
								girlTimer = fixTimer(girlTimer);
								bunnyTimer = fixTimer(bunnyTimer);

								reduceMilliseconds();

								fillRectangle(25,25,80,7,17969);
								printText("+10 seconds", 25, 25, RGBToWord(0xff,0xff,0), 17969);
							}
							lolli_y = 141;	// resets lollipopman
							popUp = 1;
							gameScore = gameScore+500;
								hit++;
							if (hit>=150)
							{
								day = 0;
								gameScore = 0;
								divorce();
								gameOver();
							}
							GPIOA->ODR |= (1 << 12);
							delay(100);  
							GPIOA->ODR &= ~(1 << 12);
						}

					}
					else if(lolli_y > 140)
					{
						fillRectangle(56,lolli_y,14,16,17969);
						lolli_y = 16;
						lolliGo = 0;
					}
				}

				

				if (girlGo == 1)	// starts girl movement
				{
					if (girlx <= 101 && girly <= 140)
					{
						fillRectangle(girlx,girly,7,16,17969);
						girlx = girlx + 2;
						girly = girly + (ceil(speed/2)+1);
						putImage(girlx,girly,7,16,girl,0,0);
						
						// if collides with car
						if (isInside(girlx,girly,7,16,x,y) || isInside(girlx,girly,7,16,x+12,y))
						{
							fillRectangle(girlx,girly,7,16,17969);
							if (lives < 3)	// gain life if lives<3
							{
								lives++;
								fillRectangle(25,25,80,7,17969);
								printText("+1 life", 25, 25, RGBToWord(0xff,0xff,0), 17969);
							}
							else	// if lives = 3
							{
								// gives 10 additional seconds and adjusts timers
								for (i=0;i<=3;i++)
								{
									carTimer[i] = fixTimer(carTimer[i]);
								}
								timer = fixTimer(timer);
								lolliTimer = fixTimer(lolliTimer);
								girlTimer = fixTimer(girlTimer);
								bunnyTimer = fixTimer(bunnyTimer);

								reduceMilliseconds();

								fillRectangle(25,25,80,7,17969);
								printText("+10 seconds", 25, 25, RGBToWord(0xff,0xff,0), 17969);
							}
							girly=141;	// resets girl
							popUp = 1;
							hit++;		
							gameScore = gameScore + 250;
						if (hit>=150)
						{
							day = 0;
							gameScore = 0;
							divorce();
							gameOver();
						}

							GPIOA->ODR |= (1 << 12);
							delay(100);  
							GPIOA->ODR &= ~(1 << 12);
						}
					}
					else
					{
						fillRectangle(girlx,girly,7,16,17969);
						girlx = 20;
						girly = 35;
						girlGo = 0;
					}

				}

				if (bunnyGo == 1)
				{
					if (bunny_x >= 20 && bunny_y <= 140)
					{
						fillRectangle(bunny_x,bunny_y,12,16,17969);
						bunny_x = bunny_x - 3;
						bunny_y = bunny_y + (ceil(speed/2)+1);
						putImage(bunny_x,bunny_y,11,17,bunny,0,0);
						
						if (isInside(bunny_x,bunny_y,12,16,x,y) || isInside(bunny_x,bunny_y,12,16,x+12,y))
						{
							fillRectangle(bunny_x,bunny_y,12,16,17969);
							if (lives < 3)
							{
								lives++;
								fillRectangle(25,25,80,7,17969);
								printText("+1 life", 25, 25, RGBToWord(0xff,0xff,0), 17969);
							}
							else 
							{
								for (i=0;i<=3;i++)
								{
									carTimer[i] = fixTimer(carTimer[i]);
								}
								timer = fixTimer(timer);
								lolliTimer = fixTimer(lolliTimer);
								girlTimer = fixTimer(girlTimer);
								bunnyTimer = fixTimer(bunnyTimer);

								reduceMilliseconds();

								fillRectangle(25,25,80,7,17969);
								printText("+10 seconds", 25, 25, RGBToWord(0xff,0xff,0), 17969);
							}
							bunny_y=141;
							popUp = 1;
							hit++;
							gameScore = gameScore+100;
							if (hit>=150)
							{
								day = 0;
								gameScore = 0;
								divorce();
								gameOver();
							}

							//To light up a green LED every time you hit a bunny
							GPIOA->ODR |= (1 << 12);
							delay(100);  
							GPIOA->ODR &= ~(1 << 12);
						}
					}//end if for hitting bunny
					else
					{
						fillRectangle(bunny_x,bunny_y,12,16,17969);
						bunny_x = 96;
						bunny_y = 35;
						bunnyGo = 0;
					}//end else

				}


				//Keep this as the only delay in this loop
				delay(250);
				
			}	// end game being played

			gameScore = gameScore + (1000*lives);
			if (gameScore > highScore)
			{
				highScore = gameScore;
			}//end if


			//If you lose all your lives you blow up
			if (lives == 0)
			{
				day = 0;
				gameScore = 0;
				accident(0);
			}//end if 


			//To display the winning screen if you last all 5 days
			else if (day > 5)
			{
				day = 0;
				gameScore = 0;
				delay(900);
				fillRectangle(0,0,128,180,0);

				printTextX2("YOU", 45, 60, RGBToWord(0xff,0xff,0), 0);
				printTextX2("WIN", 45, 80, RGBToWord(0xff,0xff,0), 0);
				delay(1200);
				fillRectangle(0,0,150,180,0);
			}//end else if
			else	// End Screen
			{
				day = endScreen(day, deliverys);
			
			}//end else

		}	// end while startgame = 1
	}	// end while(1)
	return 0;
}	// end main


void initSysTick(void)
{
	SysTick->LOAD = 48000;
	SysTick->CTRL = 7;
	SysTick->VAL = 10;
	__asm(" cpsie i "); // enable interrupts
}
void SysTick_Handler(void)
{
	//music
	if (tune_playing)
	{
		tune_time_remaining--;
		if(tune_time_remaining<=0)
		{
			tune_index++;
			if(tune_index>=tune_length)
			{
				tune_index = 0;
			}
			playNote(notes[tune_index]);
			tune_time_remaining=tune1_times[tune_index];
		}
	}
	milliseconds++;
}
void initClock(void)
{
// This is potentially a dangerous function as it could
// result in a system with an invalid clock signal - result: a stuck system
        // Set the PLL up
        // First ensure PLL is disabled
        RCC->CR &= ~(1u<<24);
        while( (RCC->CR & (1 <<25))); // wait for PLL ready to be cleared
        
// Warning here: if system clock is greater than 24MHz then wait-state(s) need to be
// inserted into Flash memory interface
				
        FLASH->ACR |= (1 << 0);
        FLASH->ACR &=~((1u << 2) | (1u<<1));
        // Turn on FLASH prefetch buffer
        FLASH->ACR |= (1 << 4);
        // set PLL multiplier to 12 (yielding 48MHz)
        RCC->CFGR &= ~((1u<<21) | (1u<<20) | (1u<<19) | (1u<<18));
        RCC->CFGR |= ((1<<21) | (1<<19) ); 

        // Need to limit ADC clock to below 14MHz so will change ADC prescaler to 4
        RCC->CFGR |= (1<<14);

        // and turn the PLL back on again
        RCC->CR |= (1<<24);        
        // set PLL as system clock source 
        RCC->CFGR |= (1<<1);
}
void delay(volatile uint32_t dly)
{
	uint32_t end_time = dly + milliseconds;
	while(milliseconds != end_time)
		__asm(" wfi "); // sleep
}

void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber)
{
	Port->PUPDR = Port->PUPDR &~(3u << BitNumber*2); // clear pull-up resistor bits
	Port->PUPDR = Port->PUPDR | (1u << BitNumber*2); // set pull-up bit
}
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode)
{
	/*
	*/
	uint32_t mode_value = Port->MODER;
	Mode = Mode << (2 * BitNumber);
	mode_value = mode_value & ~(3u << (BitNumber * 2));
	mode_value = mode_value | Mode;
	Port->MODER = mode_value;
}
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py)
{
	// checks to see if point px,py is within the rectange defined by x,y,w,h
	uint16_t x2,y2;
	x2 = x1+w;
	y2 = y1+h;
	int rvalue = 0;
	if ( (px >= x1) && (px <= x2))
	{
		// ok, x constraint met
		if ( (py >= y1) && (py <= y2))
			rvalue = 1;
	}
	return rvalue;
}

void setupIO()
{
	RCC->AHBENR |= (1 << 18) + (1 << 17); // enable Ports A and B
	display_begin();
	pinMode(GPIOB,4,0);
	pinMode(GPIOB,5,0);
	pinMode(GPIOA,8,0);
	pinMode(GPIOA,11,0);
	enablePullUp(GPIOB,4);
	enablePullUp(GPIOB,5);
	enablePullUp(GPIOA,11);
	enablePullUp(GPIOA,8);
	pinMode(GPIOB, 0,0);
	enablePullUp(GPIOB, 0);
	pinMode(GPIOA,9,1);
	pinMode(GPIOB,3,1);
	enablePullUp(GPIOB,3);
	enablePullUp(GPIOA,12);
	pinMode(GPIOA,12,1);
}

uint16_t titleScreen(uint16_t gameStart, uint16_t highScore)
{
	uint16_t selector_y = 80;

	printTextX2("CAR MANIA", 11, 20, RGBToWord(0xff,0xff,0), 0);
	printTextX2("START", 25, 80, RGBToWord(0xff,0xff,0), 0);
	printTextX2("SCORE", 25, 100, RGBToWord(0xff,0xff,0), 0);

	while (gameStart == 0)
	{

		printTextX2("|", 10, selector_y, RGBToWord(0xff,0xff,0), 0);

		if (selector_y == 80 && (GPIOA->IDR & (1 << 11)) == 0)	// if down pressed
		{
			selector_y = selector_y + 20;	// move selector down
			fillRectangle(11,80,12,16,0);
		}

		else if (selector_y == 100 && (GPIOA->IDR & (1 << 8)) == 0)	// if up pressed
		{
			selector_y = selector_y - 20;	//move selector up
			fillRectangle(11,100,12,16,0);
		}

		else if (selector_y == 80 && (GPIOB->IDR & (1 << 0)) == 0)	// if START selected
		{	
			startScreen();	//start game
			gameStart = 1;
		}

		else if (selector_y == 100 && (GPIOB->IDR & (1 << 0))==0)	// if SCORE selected
		{
			scoreScreen(highScore);	// display start screen
			printTextX2("CAR MANIA", 11, 20, RGBToWord(0xff,0xff,0), 0);
			printTextX2("START", 25, 80, RGBToWord(0xff,0xff,0), 0);
			printTextX2("SCORE", 25, 100, RGBToWord(0xff,0xff,0), 0);
		}
	}
		return gameStart;
}

//Function to display high score
void scoreScreen(uint16_t highScore)
{
	fillRectangle(0,0,128,160,0);
	printNumberX2(highScore, 24, 75, RGBToWord(0xff,0xff,0), 0);
	printTextX2("HIGH SCORE", 5, 30, RGBToWord(0xff,0xff,0), 0);
	delay(900);
	fillRectangle(0,0,128,150,0);
}

//Function to display a message when you start the game
void startScreen()
{
	fillRectangle(0,0,128,160,0);
	delay(500);
	printTextX2(" GO!!", 24, 75, RGBToWord(0xff,0xff,0), 0);
	delay(900);
	fillRectangle(0,0,128,150,0);
}

// Function to display end screen
uint16_t endScreen(uint16_t day, uint16_t deliverys)
{
	// Declare variables
	uint16_t money;
	uint16_t moneySpent = 20;
	uint16_t foodNotSelected = 1;
 	uint8_t boughtFood = 0;

	uint16_t selector_y;
	uint16_t endy = 29;
	uint16_t i;
	uint16_t endChoices;

	fillRectangle(0,0,128,180,0);
	printTextX2("Day ", 10, 10, RGBToWord(0xff,0xff,0), 0);
	printLives(day, 50, 10, RGBToWord(0xff,0xff,0), 0);

	// Amount of choices for each day
	if (day == 1)
	{
		money = 0;
		printText("Manage your", 10, endy, RGBToWord(0xff,0xff,0), 0);
		endy = endy+9;
		printText("expenses below.", 10, endy, RGBToWord(0xff,0xff,0), 0);
		endy = endy+9;
		endChoices = 0;
	}
	else if (day == 2)
	{
		endChoices=0;
	}
	else if (day == 3)
	{
		endChoices = 0;
	}
	else if (day == 4)
	{
		endChoices=0;
	
	}
	else if (day == 5)
	{
		endChoices=0;
	}
	
	// Calculate money
	money = money+(deliverys*2);
	endy = endy+9;
	// print deliverys
	printText("x", 20, endy, RGBToWord(0xff,0xff,0), 0);
	printMoney(deliverys, 27, endy, RGBToWord(0xff,0xff,0), 0);
	printText("deliverys:", 41, endy, RGBToWord(0xff,0xff,0), 0);
	printMoney((deliverys*2), 111, endy, RGBToWord(0xff,0xff,0), 0);
	endy = endy+12;
	// print rent
	printText("-20 Rent", 20, endy, RGBToWord(0xff,0,0), 0);
	endy = endy+9;

	printText("Next day", 20, (150), RGBToWord(0xff,0xff,0), 0);

	selector_y = endy;

	i=1;
	while (i == 1)
	{

        // print food
        printText("-10 Buy food", 20, endy, RGBToWord(0xff,(foodNotSelected*255),0), 0);
	
		//print total
		printText("TOTAL:", 20, (endy+((endChoices+1)*9)), RGBToWord(0xff,0xff,0), 0);
		if (money >= 20)
		{
			printMoney((money-moneySpent), 62, (endy+((endChoices+1)*9)), RGBToWord(0xff,0xff,0), 0);
		}
		else
		{
			printMoney(0, 62, (endy+((endChoices+1)*9)), RGBToWord(0xff,0xff,0), 0);
		}

			
		printText("|", 10, selector_y, RGBToWord(0xff,0xff,0), 0);

		if (selector_y == 150 && (GPIOA->IDR & (1 << 8)) == 0)	// next day & up pressed
		{
			fillRectangle(10,selector_y,5,7,0);
			selector_y = (endy+(endChoices*9));
			delay(250);
		}
		if (selector_y != 150 && (GPIOA->IDR & (1 << 8)) == 0 && selector_y > endy)	// up pressed & can go up
		{
			fillRectangle(10,selector_y,5,7,0);
			selector_y = selector_y - 9;
			delay(250);
		}
		if (selector_y == (endy+(endChoices*9)) && (GPIOA->IDR & (1 << 11)) == 0)	// down pressed & lowest choice
		{
			fillRectangle(10,selector_y,5,7,0);
			selector_y = 150;
			delay(250);
		}
		if (selector_y < (endy+(endChoices*9)) && (GPIOA->IDR & (1 << 11)) == 0)	// down pressed & can go down
		{
			fillRectangle(10,selector_y,5,7,0);
			selector_y = selector_y + 9;
			delay(250);
		}

		// Choices

		if (selector_y == (endy+(0*9)) && (GPIOB->IDR & (1 << 0)) == 0)
		{
			if (foodNotSelected == 1 && money >= (moneySpent+10))	// if food not selected
			{
				foodNotSelected = 0;
				moneySpent = moneySpent+10;
				boughtFood = 1;
			}
			else if(foodNotSelected == 0)	// if food selected
			{
				foodNotSelected = 1;
				moneySpent = moneySpent-10;
			}
			delay(250);
		}


		if (selector_y == 150 && (GPIOB->IDR & (1 << 0)) == 0)	// next day & press button
		{

			i = 0;
			endy = 29;
			day++;



				if (boughtFood) // If food was bought
                {

                    food(); 
                    boughtFood = 0; // Reset for each day
                }	

			if (money < 20)
			{
                day = 0;
                norent();
                gameOver();
				//end screen for homelessness
			}
						
		}
					
	}
	return day;
}

//function to display a game over message
void gameOver()
{
	delay(900);
	fillRectangle(0,0,128,180,0);
	printTextX2("GAME OVER", 7, 60, RGBToWord(0xff,0xff,0), 0);
	delay(1200);
	fillRectangle(0,0,150,180,0);
}
//Function if you lose all your lives
void accident()
{
	delay(900);
	fillRectangle(0,0,128,180,0);
	printTextX2("BOOM", 35, 20, RGBToWord(0xff,0xff,0), 0);
	putImage(35,70,50,50,explosion,0,0);
	printText("Rest in Peace",20,140,RGBToWord(0xff,0xff,0), 0);
	delay(1200);
	fillRectangle(0,0,150,180,0);	
}
//Function for if you buy food
void food()
{
	delay(900);
	fillRectangle(0,0,128,180,0);
	printText("You bought your",5,10,RGBToWord(0xff,0xff,0), 0);
	printText("kids a treat!",15,20,RGBToWord(0xff,0xff,0), 0);
	putImage(35,70,40,40,Cake,0,0);

	delay(1200);
	fillRectangle(0,0,150,180,0);	
}
//Function for if you hit too many pedestrians and your wife leaves you
void divorce()
{
    delay (1200);
    fillRectangle(0,0,128,180,0);
	printText("You hit too",5,10,RGBToWord(0xff,0xff,0), 0);
    printText("many pedestrians",5,20,RGBToWord(0xff,0xff,0), 0);
    printText("You have ",5,50,RGBToWord(0xff,0xff,0), 0);
    printText("been arrested",5,60,RGBToWord(0xff,0xff,0), 0);
	delay(1200);
    fillRectangle(0,0,128,180,0);
    putImage(30,50,46,49,wife,0,0);
    printText("Your wife is",5,10,RGBToWord(0xff,0xff,0), 0);
    printText("embarrassed and",5,20,RGBToWord(0xff,0xff,0), 0);
    printText("wants a divorce",5,30,RGBToWord(0xff,0xff,0), 0);
    delay(1200);
    fillRectangle(0,0,150,180,0);
}
//Function for if you don't have enough money for rent
void norent()
{
	delay (1200);
	fillRectangle(0,0,128,180,0);
    printText("Your family is",15,10,RGBToWord(0xff,0xff,0), 0);
    printText("now homeless",17,20,RGBToWord(0xff,0xff,0), 0);
	putImage(50,50,20,17,homeless,0,0);
	printText("Do better.",30,100,RGBToWord(0xff,0xff,0), 0);
	delay(1200);
    fillRectangle(0,0,150,180,0);
}
void reduceMilliseconds()
{
	if (milliseconds <= 10000)
	{
		milliseconds = 0;
	}
	else
	{
		milliseconds = milliseconds - 10000;
	}
}
uint16_t fixTimer(uint16_t timer)
{
	if (milliseconds <= 10000)
	{
		timer = timer - milliseconds;
	}
	else
	{
		timer = timer - 10000;
	}
	return timer;
}

uint32_t random(uint32_t lower,uint32_t upper)
{
    return (prbs()%(upper-lower))+lower;
}
uint32_t shift_register=1234;
uint32_t prbs()
{
	// This is an unverified 31 bit PRBS generator
	// It should be maximum length but this has not been verified 
	unsigned long new_bit=0;
	static int busy=0; // need to prevent re-entrancy here
	if (!busy)
	{
		busy=1;
		new_bit= ((shift_register & (1<<27))>>27) ^ ((shift_register & (1<<30))>>30);
		new_bit= ~new_bit;
		new_bit = new_bit & 1;
		shift_register=shift_register << 1;
		shift_register=shift_register | (new_bit);
		busy=0;
	}
	return shift_register & 0x7fffffff; // return 31 LSB's 
}
//This function is for the music
void playTune(uint32_t * the_notes, uint32_t * the_times, int length, int repeat)
{
	notes = the_notes;
	note_times = the_times;
	tune_length = length;
	tune_repeat = repeat;
	tune_time_remaining=note_times[0];
	tune_index = 0;
	tune_playing = 1;
}
